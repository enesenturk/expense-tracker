<base:BaseContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                      xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                      xmlns:base="clr-namespace:ExpenseTracker.MobileApp.Base"
                      x:Class="ExpenseTracker.MobileApp.Pages.Modules.Categories.CategoryPage"
                      Padding="20">

  <Grid x:Name="gridMain" RowDefinitions="Auto,Auto,Auto,*" RowSpacing="5" Padding="20,20,20,20">

    <Label x:Name="lblCategory" Grid.Row="0" FontSize="26" HorizontalOptions="Center" />

    <Grid Grid.Row="1" ColumnDefinitions="2*,*" ColumnSpacing="10" Margin="0,0,0,20">

      <Entry x:Name="entryCategoryName" Grid.Column="0" TextChanged="EntryCategoryName_TextChanged"/>

      <Button x:Name="btnSave" TextColor="White" Grid.Column="1" CommandParameter="{Binding Id}" Clicked="OnUpdateClicked"/>

    </Grid>

    <Button x:Name="btnNew" Grid.Row="2" TextColor="White" Margin="0,15,0,15"
            CornerRadius="10" Clicked="OnCreateClicked"/>

    <CollectionView Grid.Row="3"
                    x:Name="subCategoriesCollection"
                    SelectionMode="None">

      <CollectionView.ItemTemplate>
        <DataTemplate>

          <Grid Padding="5" ColumnDefinitions="*,Auto,Auto" VerticalOptions="Center" BackgroundColor="{Binding RowColor}">

            <Label Grid.Column="0" Text="{Binding Name}" FontSize="18"
                   TextColor="White" VerticalOptions="Center" HorizontalOptions="Start"/>

            <Button Grid.Column="1" BackgroundColor="Transparent" WidthRequest="40" HeightRequest="40"
                    CornerRadius="20" VerticalOptions="Center"
                    Padding="0" Margin="0,0,8,0"
                    CommandParameter="{Binding .}" Clicked="OnUpdateSubClicked">

              <Button.ImageSource>
                <FileImageSource File="icon_edit.png"/>
              </Button.ImageSource>
            </Button>

            <Button Grid.Column="2" BackgroundColor="Transparent" WidthRequest="40" HeightRequest="40"
                    CornerRadius="20" VerticalOptions="Center"
                    Padding="0" Margin="0,0,8,0"
                    CommandParameter="{Binding Id}" Clicked="OnDeleteClicked">

              <Button.ImageSource>
                <FileImageSource File="icon_rubbish.png"/>
              </Button.ImageSource>
            </Button>

          </Grid>
        </DataTemplate>

      </CollectionView.ItemTemplate>

    </CollectionView>

  </Grid>

</base:BaseContentPage>
